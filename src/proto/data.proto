syntax = "proto3";
package oceandoc.proto;

enum FileType {
  Unused = 0;
  Regular = 1;
  Symlink = 2;
  Dir = 3;
}

message FileItem {
  string path = 1;
  uint64 size = 2;
  uint64 create_time = 3;  // local create time
  uint64 update_time = 4;  // local update time
  FileType file_type = 5;

  string owner = 6;
  uint64 remote_access_time = 7;  // remote access time
  string sha256 = 8;
  string enc_sha256 = 9;
  // remote file permiss, 1bit: need auth, 2bit: group, 3bit: all
  uint32 permission = 10;
  bool sync_finished = 11;
}

message ScanStatus {
  string path = 1;
  uint64 file_num = 2;
  uint64 dir_num = 3;
  uint64 symlink_num = 4;
  repeated string scanned_dirs = 5;
  repeated FileItem scanned_files = 6;
  int64 create_time = 7;
  int64 update_time = 8;
  int64 complete_time = 9;
}

message RepoItem {
  string repo_name = 1;
  string path = 2;
  string uuid = 3;
}

message OceanRepo {
  map<string, RepoItem> repos = 1;
}
